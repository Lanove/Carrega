Version 4
SHEET 1 1992 680
WIRE 1152 -288 1120 -288
WIRE 1120 -256 1120 -288
WIRE 1376 -224 1376 -272
WIRE 1520 -208 1424 -208
WIRE 1520 -176 1520 -208
WIRE 1120 -160 1120 -176
WIRE 1456 -160 1424 -160
WIRE 1456 -144 1456 -160
WIRE 1376 -112 1376 -144
WIRE 1520 -80 1520 -96
WIRE 800 -64 736 -64
WIRE 384 -48 400 -80
WIRE 496 -48 480 -80
WIRE 880 -48 864 -48
WIRE 896 -48 880 -48
WIRE 992 -48 976 -48
WIRE 1104 -48 992 -48
WIRE 736 -32 736 -64
WIRE 800 -32 784 -32
WIRE 1216 -32 1168 -32
WIRE 1232 -32 1216 -32
WIRE 1328 -32 1312 -32
WIRE 992 -16 992 -48
WIRE 992 -16 944 -16
WIRE 1104 -16 1040 -16
WIRE 496 0 496 -48
WIRE 528 0 496 0
WIRE 656 0 608 0
WIRE 944 0 944 -16
WIRE 656 16 656 0
WIRE 496 32 496 0
WIRE 496 32 480 32
WIRE 784 32 784 -32
WIRE 880 32 880 -48
WIRE 880 32 784 32
WIRE 192 48 128 48
WIRE 272 48 192 48
WIRE 384 48 384 -48
WIRE 384 48 352 48
WIRE 416 48 384 48
WIRE 1040 48 1040 -16
WIRE 1056 48 1040 48
WIRE 1152 48 1136 48
WIRE 1216 48 1216 -32
WIRE 1376 48 1376 -16
WIRE 1376 48 1280 48
WIRE 496 64 480 64
WIRE 944 96 944 64
WIRE 992 96 992 64
WIRE 992 96 944 96
WIRE 1376 96 1376 48
WIRE 496 112 496 64
WIRE 496 112 480 112
WIRE 528 112 496 112
WIRE 640 112 608 112
WIRE 480 128 480 112
WIRE 736 128 736 48
WIRE 992 128 992 96
WIRE 1040 128 1040 48
WIRE 1104 128 1040 128
WIRE 1280 128 1280 48
WIRE 1280 128 1184 128
WIRE -416 176 -416 160
WIRE -416 176 -480 176
WIRE -304 176 -304 160
WIRE -304 176 -416 176
WIRE -480 192 -480 176
WIRE 480 224 480 208
WIRE 416 288 368 288
WIRE 1376 304 1376 176
WIRE 496 368 496 288
WIRE 496 368 464 368
WIRE 512 368 496 368
WIRE 624 368 592 368
WIRE 192 384 128 384
WIRE 256 384 192 384
WIRE 368 384 368 288
WIRE 368 384 336 384
WIRE 400 384 368 384
WIRE 624 384 624 368
WIRE 496 400 464 400
WIRE 496 448 496 400
WIRE 512 448 496 448
WIRE 624 448 592 448
WIRE 496 480 496 448
WIRE 496 576 496 560
FLAG -480 192 0
FLAG -416 80 VA+
FLAG -416 256 VA-
FLAG -304 80 VH+
FLAG 1376 304 0
FLAG 480 224 0
FLAG 432 352 VA+
FLAG 432 416 VA-
FLAG 448 16 VA+
FLAG 448 80 VA-
FLAG 1456 -144 0
FLAG 1520 -80 0
FLAG 1120 -160 0
FLAG 1152 -288 VLOAD
FLAG 1376 -272 VLOAD
FLAG 992 128 0
FLAG 1136 -64 VA-
FLAG 1136 0 VH+
FLAG 832 -80 VA-
FLAG 832 -16 VA+
FLAG 736 128 0
FLAG 496 576 0
FLAG 1376 48 ISENS+
FLAG 624 384 0
FLAG 624 448 ISENS+
FLAG 192 48 VSENS
FLAG 640 112 VLOAD
FLAG 656 16 0
FLAG 192 384 ISENS
SYMBOL voltage -416 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 56 Left 2
SYMATTR Value 5
SYMATTR InstName V1
SYMBOL voltage -416 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 34 44 Left 2
WINDOW 3 32 67 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -304 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -41 75 Left 2
WINDOW 3 31 54 Left 2
SYMATTR SpiceLine Rser=1m
SYMATTR Value 12
SYMATTR InstName V3
SYMBOL res 1360 80 R0
SYMATTR InstName R8
SYMATTR Value 0.1
SYMBOL res 512 -16 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 220k
SYMATTR SpiceLine tol=1
SYMBOL res 512 96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 220k
SYMATTR SpiceLine tol=1
SYMBOL res 384 -96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 8670
SYMATTR SpiceLine tol=1
SYMBOL res 464 224 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 8670
SYMATTR SpiceLine tol=1
SYMBOL res 256 32 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 496 432 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 2k5
SYMBOL res 400 272 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 30 66 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL res 496 352 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 2k5
SYMBOL res 240 368 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 1k
SYMBOL sw 1376 -128 R180
WINDOW 0 18 28 Left 2
SYMATTR InstName SW
SYMBOL voltage 1520 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 0m 1n 1n 1s 1s)
SYMBOL AutoGenerated\\TL084 432 384 M0
SYMATTR InstName U3
SYMBOL AutoGenerated\\TL084 448 48 M0
SYMATTR InstName U4
SYMBOL voltage 1120 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V7
SYMATTR Value PULSE(0 20 1u 1u 1u 1s 1s)
SYMBOL nmos 1328 -112 R0
SYMATTR InstName M1
SYMATTR Value IRFP250N
SYMBOL AutoGenerated\\TL084 1136 -32 M180
SYMATTR InstName U1
SYMBOL res 1152 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap 1216 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.001µ
SYMATTR SpiceLine V=25 Irms=0 Rser=0.0419452 Lser=448.171p mfg="Würth Elektronik" pn="885012006044 WCAP-CSGP 0603" type="NP0"
SYMBOL res 1328 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 1200 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL AutoGenerated\\TL084 832 -48 M180
SYMATTR InstName U2
SYMBOL res 992 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 3536
SYMBOL res 976 -32 R0
SYMATTR InstName R5
SYMATTR Value 680
SYMBOL cap 928 0 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GCM155R71H104KE02" type="X7R"
SYMBOL voltage 736 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 3.1 0 1m 1m 1m 4m)
SYMBOL res 480 464 R0
SYMATTR InstName R6
SYMATTR Value 10k
TEXT -504 344 Left 2 !.tran 0 10m 0m 1m uic
TEXT 440 144 Right 2 ;0-50V -> 0-1.97V
TEXT 376 432 Right 2 ;0-2V -> 0-5A
TEXT 856 -344 Left 2 !.model SW SW(Ron=0.01 Roff=1000Meg Vt=.5 Vh=-.4)
TEXT 184 448 Left 2 ;Current Sensing Amp
TEXT 752 80 Left 2 ;0-3.1V -> 0.5A
